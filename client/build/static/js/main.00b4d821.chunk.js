(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{317:function(e,t,r){},318:function(e,t,r){"use strict";r.r(t),r.d(t,"history",(function(){return $e}));var n=r(1),o=r.n(n),a=r(65),c=r.n(a),s=r(17),i=r(103),l=r(170),b=r(23),j=r(2),u=Object(b.a)((function(e){var t=e.component,r=Object(l.a)(e,["component"]),n=localStorage.getItem("token");return Object(j.jsx)(s.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){return n?Object(j.jsx)(t,Object(i.a)({},e)):Object(j.jsx)(s.a,{to:"/login"})}}))})),d=r(334),h=r(335),O=r(49),p=r(336),x=r(351),m=r(337),f=r(352),g=r(66),k=r(58),w=r(25),v=r(22),_=r.n(v),y=r(43),B=r(20),S=r(10),N=r(11),z=r(18),A=(r(284),r(7)),C=r(63),E=r.n(C),I=r(27);E.a.defaults.baseURL="http://localhost:5000/api",E.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return console.log(t),t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),E.a.interceptors.response.use(void 0,(function(e){throw"Network Error"!==e.message||e.response||I.b.error("Network Error - Check your connection"),401===e.response.status&&(window.localStorage.removeItem("token"),$e.push("/"),I.b.info("Authentication error! please log in again")),404===e.response.status&&$e.push("/notfound"),400===e.response.status&&"get"==e.response.config.method&&e.response.data.errors.hasOwnProperty("id")&&$e.push("/notfound"),500===e.response.status&&I.b.error("Server error - Try reloading the page"),e.response}));var L,W,P,U,q,D,R,M,F,V,T,H,J,Y,G,K,Q,X,Z,$,ee=function(e){return e.data},te=function(e,t){return E.a.get(e,t).then(ee)},re=function(e,t,r){return E.a.post(e,t,r).then(ee)},ne=function(e,t,r){return E.a.put(e,t,r).then(ee)},oe=function(e){return re("/signup",e)},ae=function(e){return re("/login",e)},ce=function(){return te("/user")},se=function(){return te("/users/books")},ie=function(e){return te("/books",{params:{title:e}})},le=function(e){return te("/books/".concat(e))},be=function(e){return ne("/books/borrow/".concat(e))},je=function(e){return ne("/books/return/".concat(e))};Object(A.d)({enforceActions:"always"});var ue=(L=function(){function e(){var t=this;Object(S.a)(this,e),Object(B.a)(this,"user",W,this),Object(B.a)(this,"token",P,this),Object(B.a)(this,"appLoaded",U,this),Object(B.a)(this,"books",q,this),Object(B.a)(this,"loadingBooks",D,this),Object(B.a)(this,"book",R,this),Object(B.a)(this,"loadingBook",M,this),Object(B.a)(this,"loadingBookAction",F,this),Object(B.a)(this,"borrowedBooks",V,this),Object(B.a)(this,"loginUser",T,this),Object(B.a)(this,"signUp",H,this),Object(B.a)(this,"loadApp",J,this),Object(B.a)(this,"getCurrentUser",Y,this),Object(B.a)(this,"getAllBooks",G,this),Object(B.a)(this,"getBookById",K,this),Object(B.a)(this,"borrowBook",Q,this),Object(B.a)(this,"returnBook",X,this),Object(B.a)(this,"getBorrowedBooks",Z,this),Object(B.a)(this,"logout",$,this),Object(A.f)(this),Object(A.i)((function(){return t.token}),(function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")}))}return Object(N.a)(e,[{key:"isLoggedIn",get:function(){return null!==this.user}}]),e}(),W=Object(z.a)(L.prototype,"user",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=Object(z.a)(L.prototype,"token",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return localStorage.getItem("token")}}),U=Object(z.a)(L.prototype,"appLoaded",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=Object(z.a)(L.prototype,"books",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=Object(z.a)(L.prototype,"loadingBooks",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Object(z.a)(L.prototype,"book",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=Object(z.a)(L.prototype,"loadingBook",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(z.a)(L.prototype,"loadingBookAction",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object(z.a)(L.prototype,"borrowedBooks",[A.h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(z.a)(L.prototype,"isLoggedIn",[A.c],Object.getOwnPropertyDescriptor(L.prototype,"isLoggedIn"),L.prototype),T=Object(z.a)(L.prototype,"loginUser",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae(r);case 3:n=t.sent,Object(A.j)((function(){e.user=n.data,localStorage.setItem("token",n.token),e.appLoaded=!0})),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),I.b.error("Invalid credentials"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),H=Object(z.a)(L.prototype,"signUp",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe(r);case 3:t.sent,Object(A.j)((function(){e.appLoaded=!0})),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),I.b.error("Invalid credentials"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),J=Object(z.a)(L.prototype,"loadApp",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),Y=Object(z.a)(L.prototype,"getCurrentUser",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce();case 3:r=t.sent,Object(A.j)((function(){e.user=r.data,e.loadApp()})),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),I.b.error("Error occured fetching profile"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),G=Object(z.a)(L.prototype,"getAllBooks",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBooks=!0,t.prev=1,t.next=4,ie(r);case 4:n=t.sent,Object(A.j)((function(){e.books=n.data,e.loadingBooks=!1})),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),Object(A.j)((function(){return e.loadingBooks=!1})),I.b.error("Error occurred fetching books"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),K=Object(z.a)(L.prototype,"getBookById",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBook=!0,t.prev=1,t.next=4,le(r);case 4:n=t.sent,Object(A.j)((function(){e.book=n.data,e.book.isBorrowed=void 0!==e.user.borrowedBooks.find((function(e){return e===r})),e.loadingBook=!1})),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),Object(A.j)((function(){return e.loadingBook=!1})),I.b.error("Error occurred fetching books"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Q=Object(z.a)(L.prototype,"borrowBook",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBookAction=!0,t.prev=1,t.next=4,be(r);case 4:Object(A.j)((function(){if(null!==e.books){var t=e.books.find((function(e){return e._id===r}));t&&(t.isBorrowed=!0,t.copies=t.copies-1)}null!==e.book&&(e.book.isBorrowed=!0,e.book.copies=e.book.copies-1,e.user.borrowedBooks.push(e.book._id)),e.loadingBookAction=!1,I.b.success("Book borrowed successful")})),t.next=12;break;case 7:throw t.prev=7,t.t0=t.catch(1),Object(A.j)((function(){return e.loadingBookAction=!1})),I.b.error("Error occurred borrowing book"),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),X=Object(z.a)(L.prototype,"returnBook",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(y.a)(_.a.mark((function t(r){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBookAction=!0,t.prev=1,t.next=4,je(r);case 4:Object(A.j)((function(){if(null!==e.books){var t=e.books.find((function(e){return e._id===r}));t&&(t.isBorrowed=!1,t.copies=t.copies+1)}null!==e.book&&(e.book.isBorrowed=!1,e.book.copies=e.book.copies+1),null!==e.borrowedBooks&&(e.borrowedBooks=e.borrowedBooks.filter((function(e){return e._id!==r}))),e.user.borrowedBooks=e.user.borrowedBooks.filter((function(e){return e!==r})),e.loadingBookAction=!1,I.b.success("Book returned successfully")})),t.next=12;break;case 7:throw t.prev=7,t.t0=t.catch(1),Object(A.j)((function(){return e.loadingBookAction=!1})),I.b.error("Error occurred returning book"),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Z=Object(z.a)(L.prototype,"getBorrowedBooks",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(_.a.mark((function t(){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingBooks=!0,t.prev=1,t.next=4,se();case 4:r=t.sent,Object(A.j)((function(){e.borrowedBooks=r.data,e.loadingBooks=!1})),t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(1),Object(A.j)((function(){return e.loadingBooks=!1})),I.b.error("Error occurred get your books"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))}}),$=Object(z.a)(L.prototype,"logout",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(y.a)(_.a.mark((function t(){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.user=null,localStorage.removeItem("token"),$e.push("/login");case 3:case"end":return t.stop()}}),t)})))}}),L),de=Object(n.createContext)(new ue),he=Object(b.a)((function(){var e=k.a().shape({email:k.b().required("Email is required").email("Please put in a valid email address"),password:k.b().required("Password is required")}),t=Object(n.useContext)(de).loginUser;return Object(j.jsx)("div",{className:"auth__box",children:Object(j.jsxs)(d.a,{className:"middle",children:[Object(j.jsx)(h.a,{mb:5,children:Object(j.jsx)("h1",{className:"logo__text",children:"Heimdall Library"})}),Object(j.jsx)(d.a,{className:"auth__form__box",bg:"#fff",children:Object(j.jsx)(g.a,{validationSchema:e,initialValues:{email:"",password:""},onSubmit:function(e,r){return t(e).then((function(){return $e.push("/")})).catch((function(){return r.setSubmitting(!1)}))},children:function(e){var t=e.handleSubmit,r=e.values,n=e.handleChange,o=e.handleBlur,a=e.isSubmitting,c=e.isValid,s=e.dirty,i=e.touched,l=e.errors;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("header",{children:[Object(j.jsx)(h.a,{children:Object(j.jsx)("h1",{className:"auth__header",children:"Login to your account"})}),Object(j.jsx)(h.a,{children:Object(j.jsx)("p",{className:"auth__desc",children:"Securley login to your heimdall account"})})]}),Object(j.jsxs)(d.a,{mt:5,children:[Object(j.jsxs)(O.a,{isInvalid:!!l.email&&i.email,id:"email",children:[Object(j.jsx)(p.a,{className:"auth__label",children:"Email address"}),Object(j.jsx)(x.a,{value:r.email,name:"email",onBlur:o,onChange:n,className:"auth__input",type:"email"}),l.email&&i.email&&Object(j.jsx)(m.a,{children:l.email})]}),Object(j.jsxs)(O.a,{isInvalid:!!l.password&&i.password,mt:5,id:"password",children:[Object(j.jsx)(p.a,{className:"auth__label",children:"Password"}),Object(j.jsx)(x.a,{value:r.password,name:"password",onBlur:o,onChange:n,className:"auth__input",type:"password"}),l.password&&i.password&&Object(j.jsx)(m.a,{children:l.password})]})]}),Object(j.jsx)(f.a,{disabled:a||!c||!s,type:"submit",isLoading:a,mt:10,className:"auth__btn",children:"Log In"})]})}})}),Object(j.jsx)(h.a,{mt:5,children:Object(j.jsxs)("p",{style:{color:"#fff",fontSize:".75em"},children:["Dont have an account yet? ",Object(j.jsx)(w.a,{to:"/signup",children:"Sign up"})]})})]})})})),Oe=r(348),pe=r(350),xe={fonts:{body:"Karla, sans-serif"},styles:{global:{body:"#fff"}}},me=r(5),fe=r(339),ge=r(338),ke=r(354),we=r(340),ve=r(349),_e=r(355),ye=r(341),Be=r(353),Se=function(){return Object(j.jsx)(d.a,{children:Object(j.jsx)(ge.a,{maxW:"container.lg",children:Object(j.jsx)(h.a,{mt:"2em",children:Object(j.jsx)(Be.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})})})},Ne=Object(b.a)((function(){var e=Object(n.useContext)(de),t=e.user,r=e.logout,o=Object(fe.a)("(max-width: 500px)"),a=Object(me.a)(o,1)[0];return t?Object(j.jsx)("header",{className:"nav",children:Object(j.jsx)(ge.a,{maxW:"container.lg",height:"50px",children:Object(j.jsx)("nav",{className:"navbar",children:Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(d.a,{children:Object(j.jsx)(w.b,{to:"/",className:"auth__header",children:"Hemidall Library"})}),Object(j.jsx)(we.a,{}),Object(j.jsxs)(ke.a,{spacing:"30px",children:[!a&&Object(j.jsx)(w.b,{activeClassName:"active__nav",to:"/borrowed",children:"My borrowed books"}),Object(j.jsx)(d.a,{children:Object(j.jsxs)(ve.a,{size:"large",isLazy:!0,children:[Object(j.jsx)(ve.b,{as:d.a,children:Object(j.jsxs)(ke.a,{spacing:"5px",children:[Object(j.jsx)(_e.a,{src:t.avatar,alt:"user_avatar",borderRadius:"full",boxSize:"40px"}),Object(j.jsx)(ye.a,{boxSize:8})]})}),Object(j.jsxs)(ve.d,{style:{zIndex:200},minWidth:"180px",className:"nav__auth__box",children:[Object(j.jsx)(ve.c,{onClick:function(){return $e.push("/borrowed")},children:"My borrowed books"}),Object(j.jsx)(ve.c,{onClick:function(){return r()},children:"Logout"})]})]})})]})]})})})}):Object(j.jsx)(Se,{})})),ze=r(356),Ae=r(21),Ce=function(){var e=Object(Ae.c)("title",Ae.b),t=Object(me.a)(e,2),r=t[0],n=t[1];return Object(j.jsx)(d.a,{children:Object(j.jsx)(g.a,{initialValues:{title:r||""},onSubmit:function(e){return n(e.title)},children:function(e){var t=e.handleSubmit,r=e.values,n=e.errors,o=e.touched,a=e.handleBlur,c=e.handleChange;return Object(j.jsx)("form",{onSubmit:t,children:Object(j.jsxs)(ke.b,{spacing:"20px",direction:["column","row"],alignItems:"center",children:[Object(j.jsxs)(O.a,{style:{maxWidth:"350px"},isInvalid:!!n.title&&o.title,id:"password",children:[Object(j.jsx)(x.a,{value:r.title,name:"title",onBlur:a,onChange:c,className:"search__input",placeholder:"What are you looking for"}),n.title&&o.title&&Object(j.jsx)(m.a,{children:n.title})]}),Object(j.jsx)(f.a,{type:"submit",className:"search__btn",children:"Search"})]})})}})})},Ee=r(9),Ie=r(342),Le=r(343),We=r(344),Pe=r(345),Ue=r(67),qe=Object(b.a)((function(e){var t=e.book,r=Object(fe.a)("(max-width: 500px)"),n=(Object(me.a)(r,1)[0],Object(Ee.a)(Array(Math.floor(t.rating)))),o=Object(Ae.c)("bookPane",Ae.b),a=Object(me.a)(o,2),c=(a[0],a[1]);return Object(j.jsxs)(d.a,{onClick:function(){return c(t._id)},className:"book__item__box",children:[Object(j.jsx)(Ie.a,{colorScheme:"purple",children:"New"}),Object(j.jsxs)(ke.a,{spacing:"10px",alignItems:"flex-start",children:[Object(j.jsx)(_e.a,{src:t.images[0],alt:"book-photo",className:"book__item__img"}),Object(j.jsxs)(d.a,{children:[Object(j.jsx)(w.a,{to:"/book/".concat(t._id),className:"book__item__link",children:t.title}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(ke.a,{spacing:"4px",children:n.map((function(e,t){return Object(j.jsx)(Le.a,{boxSize:2,color:"#237EA3"},t)}))}),Object(j.jsx)("p",{style:{color:"#237EA3"},children:t.rating})]}),Object(j.jsxs)("p",{children:["By: ",Object(j.jsx)("span",{style:{color:"#237EA3",fontWeight:"bold"},children:t.author})]})]})]}),Object(j.jsxs)(ke.a,{spacing:"20px",mt:3,mb:3,children:[t.copies>1?Object(j.jsxs)("small",{children:[Object(j.jsx)(We.a,{boxSize:3,color:"#237EA3"})," Available"]}):Object(j.jsxs)("small",{children:[Object(j.jsx)(Pe.a,{boxSize:3,color:"#237EA3"})," Un-available"]}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Ue.a,{size:"12px",color:"#237EA3"}),Object(j.jsxs)("small",{children:[t.pages," pages"]})]}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Ue.b,{size:"12px",color:"#237EA3"}),Object(j.jsxs)("small",{children:[t.genre," genre"]})]})]}),Object(j.jsx)(d.a,{children:Object(j.jsx)("p",{className:"truncate",children:t.description})}),Object(j.jsx)(d.a,{mt:4,children:Object(j.jsxs)("small",{style:{fontWeight:"bold"},children:["Published ",t.publishedDate]})})]})})),De=r(347),Re=function(){return Object(j.jsx)(h.a,{pt:10,children:Object(j.jsx)(Be.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"})})},Me=r(346),Fe=Object(b.a)((function(){var e=Object(Ae.c)("bookPane",Ae.b),t=Object(me.a)(e,2),r=t[0],o=(t[1],""),a=Object(s.h)(),c=Object(s.g)();o=c.pathname.startsWith("/book")?a.id:r;var i=Object(n.useContext)(de),l=i.loadingBook,b=i.book,u=i.getBookById,h=i.user,O=i.loadingBookAction,p=i.borrowBook,x=i.returnBook;if(Object(n.useEffect)((function(){u(o)}),[u,o]),null===b||l)return Object(j.jsx)(Re,{});var m=Object(Ee.a)(Array(Math.floor(b.rating)));return Object(j.jsx)(d.a,{className:c.pathname.startsWith("/book")?"":"book__item__box maxed",p:"0",children:Object(j.jsxs)(ge.a,{maxW:c.pathname.startsWith("/book")?"container.lg":"",children:[Object(j.jsxs)(d.a,{p:"1.25em",pb:"0",children:[Object(j.jsx)(d.a,{mb:4,children:c.pathname.startsWith("/book")&&Object(j.jsx)(w.a,{to:"/",style:{color:"#237EA3"},children:"\u2190 back"})}),Object(j.jsxs)(ke.a,{spacing:"10px",alignItems:"flex-start",children:[Object(j.jsx)(_e.a,{src:b.images[0],alt:"book-photo",className:"book__item__img"}),Object(j.jsxs)(d.a,{children:[Object(j.jsx)(w.a,{to:"/book/".concat(b._id),className:"book__item__link",children:b.title}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(ke.a,{spacing:"4px",children:m.map((function(e,t){return Object(j.jsx)(Le.a,{boxSize:2,color:"#237EA3"},t)}))}),Object(j.jsx)("p",{style:{color:"#237EA3"},children:b.rating})]}),Object(j.jsxs)("p",{children:["By: ",Object(j.jsx)("span",{style:{color:"#237EA3",fontWeight:"bold"},children:b.author})]}),b.isBorrowed?Object(j.jsx)(Ie.a,{colorScheme:"green",children:"Borrowed"}):b.copies<=1?Object(j.jsx)(Ie.a,{colorScheme:"red",children:"Un available"}):""]})]}),Object(j.jsx)(d.a,{mt:5,children:Object(j.jsxs)(ke.a,{spacing:"20px",mt:3,mb:3,children:[b.copies>1?Object(j.jsxs)("small",{children:[Object(j.jsx)(We.a,{boxSize:3,color:"#237EA3"})," Available"]}):Object(j.jsxs)("small",{children:[Object(j.jsx)(Pe.a,{boxSize:3,color:"#237EA3"})," Un-available"]}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Me.a,{color:"#237EA3",boxSize:"15px"})," ",Object(j.jsxs)("small",{children:[b.copies," copies left"]})]}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Ue.a,{size:"12px",color:"#237EA3"}),Object(j.jsxs)("small",{children:[b.pages," pages"]})]}),Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Ue.b,{size:"12px",color:"#237EA3"}),Object(j.jsxs)("small",{children:[b.genre," genre"]})]})]})}),Object(j.jsxs)(ke.a,{mt:5,children:[b.isBorrowed?Object(j.jsx)(f.a,{disabled:O,onClick:function(){return x(b._id)},isLoading:O,className:"borrow__btn",children:"Return copy"}):Object(j.jsx)(f.a,{isLoading:O,onClick:function(){return p(b._id)},disabled:b.isBorrowed||h.borrowedBooks.length>=2||b.copies<=1||O,className:"borrow__btn",children:"Borrow a copy"}),Object(j.jsx)(we.a,{}),Object(j.jsx)("a",{href:b.productLink,target:"_blank",rel:"noreferrer noopener",className:"product__link",children:"Buy book here"})]})]}),Object(j.jsx)(De.a,{mt:3,mb:3}),Object(j.jsxs)(d.a,{className:"book__info",p:"1.25em",pt:"0",children:[Object(j.jsx)("h3",{style:{fontWeight:700,fontSize:"1.1em"},children:"Book summary"}),Object(j.jsx)(d.a,{children:Object(j.jsx)("p",{children:b.description})}),Object(j.jsx)(d.a,{mt:6,children:Object(j.jsxs)("small",{style:{fontWeight:"bold"},children:["Published ",b.publishedDate]})})]})]})})})),Ve=Object(b.a)((function(){var e=Object(n.useContext)(de),t=e.loadingBooks,r=e.books,o=e.getAllBooks,a=(e.book,Object(Ae.c)("bookPane",Ae.b)),c=Object(me.a)(a,2),s=c[0],i=(c[1],Object(Ae.c)("title",Ae.b)),l=Object(me.a)(i,2),b=l[0],u=(l[1],Object(fe.a)("(max-width: 500px)")),h=Object(me.a)(u,1)[0];return Object(n.useEffect)((function(){o(b||"")}),[o,b]),t||null==r?Object(j.jsx)(Se,{}):Object(j.jsx)(d.a,{children:Object(j.jsxs)(ge.a,{maxW:"container.lg",children:[Object(j.jsx)(d.a,{mt:5,mb:5,children:Object(j.jsx)(Ce,{})}),Object(j.jsx)(d.a,{children:Object(j.jsxs)(ze.a,{spacing:"1em",templateColumns:{xl:"0.8fr 1fr",lg:"0.8fr 1fr",sm:"1fr"},children:[Object(j.jsxs)(d.a,{children:[Object(j.jsxs)(d.a,{children:[b&&Object(j.jsx)(d.a,{mb:4,children:Object(j.jsxs)("h3",{className:"auth__header",children:['Search results for "',b,'"']})}),Object(j.jsxs)("small",{style:{fontWeight:"bold"},children:[r.length," book(s) found"]})]}),r.length>0?r.map((function(e){return Object(j.jsx)(d.a,{mb:5,children:Object(j.jsx)(qe,{book:e})},e._id)})):Object(j.jsx)("h2",{className:"auth__header",children:"There are no books currently available in the library"})]}),Object(j.jsx)(d.a,{children:!h&&s&&Object(j.jsx)(Fe,{})})]})})]})})})),Te=Object(b.a)((function(){var e=Object(n.useContext)(de),t=e.user,r=e.loadingBooks,o=e.getBorrowedBooks,a=e.borrowedBooks,c=Object(Ae.c)("bookPane",Ae.b),s=Object(me.a)(c,2),i=s[0];s[1];return Object(n.useEffect)((function(){o()}),[o]),r||null==a?Object(j.jsx)(Se,{}):Object(j.jsx)(d.a,{mt:5,children:Object(j.jsxs)(ge.a,{maxW:"container.lg",children:[Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(_e.a,{src:null===t||void 0===t?void 0:t.avatar,alt:"avatar",width:"100px",height:"100px"}),Object(j.jsxs)(d.a,{children:[Object(j.jsx)("h2",{children:null===t||void 0===t?void 0:t.email}),Object(j.jsxs)("p",{style:{fontWeight:"bold"},className:"auth__label",children:["You have currently borrowed ",null===t||void 0===t?void 0:t.borrowedBooks.length," book(s)"]})]})]}),Object(j.jsxs)(d.a,{mt:5,mb:5,children:[Object(j.jsxs)(d.a,{children:[Object(j.jsx)("h3",{style:{fontSize:"1.2em"},children:"Borrowed Books"}),t.borrowedBooks.length>=2&&Object(j.jsx)(Ie.a,{colorScheme:"red",children:"Max allowed books"})]}),Object(j.jsx)(d.a,{mt:5,children:Object(j.jsxs)(ze.a,{spacing:"1em",templateColumns:{xl:"0.8fr 1fr",lg:"0.8fr 1fr",sm:"1fr"},children:[Object(j.jsxs)(d.a,{children:[Object(j.jsx)(d.a,{children:Object(j.jsxs)("small",{style:{fontWeight:"bold"},children:[a.length," books borrowed"]})}),a.map((function(e){return Object(j.jsx)(d.a,{mb:5,children:Object(j.jsx)(qe,{book:e})},e._id)}))]}),Object(j.jsx)(d.a,{children:i&&Object(j.jsx)(Fe,{})})]})})]})]})})})),He=Object(b.a)((function(){var e=k.a().shape({email:k.b().required("Email is required").email("Please put in a valid email address"),password:k.b().required("Password is required")}),t=Object(n.useContext)(de).signUp;return Object(j.jsx)("div",{className:"auth__box",children:Object(j.jsxs)(d.a,{className:"middle",children:[Object(j.jsx)(h.a,{mb:5,children:Object(j.jsx)("h1",{className:"logo__text",children:"Heimdall Library"})}),Object(j.jsx)(d.a,{className:"auth__form__box",bg:"#fff",children:Object(j.jsx)(g.a,{validationSchema:e,initialValues:{email:"",password:""},onSubmit:function(e,r){return t(e).then((function(){return $e.push("/login")})).catch((function(){return r.setSubmitting(!1)}))},children:function(e){var t=e.handleSubmit,r=e.values,n=e.handleChange,o=e.handleBlur,a=e.isSubmitting,c=e.isValid,s=e.dirty,i=e.touched,l=e.errors;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("header",{children:[Object(j.jsx)(h.a,{children:Object(j.jsx)("h1",{className:"auth__header",children:"Register at heimdall"})}),Object(j.jsx)(h.a,{children:Object(j.jsx)("p",{className:"auth__desc",children:"Securley signup at hemidall and start borrowing books!"})})]}),Object(j.jsxs)(d.a,{mt:5,children:[Object(j.jsxs)(O.a,{isInvalid:!!l.email&&i.email,id:"email",children:[Object(j.jsx)(p.a,{className:"auth__label",children:"Email address"}),Object(j.jsx)(x.a,{value:r.email,name:"email",onBlur:o,onChange:n,className:"auth__input",type:"email"}),l.email&&i.email&&Object(j.jsx)(m.a,{children:l.email})]}),Object(j.jsxs)(O.a,{isInvalid:!!l.password&&i.password,mt:5,id:"password",children:[Object(j.jsx)(p.a,{className:"auth__label",children:"Password"}),Object(j.jsx)(x.a,{value:r.password,name:"password",onBlur:o,onChange:n,className:"auth__input",type:"password"}),l.password&&i.password&&Object(j.jsx)(m.a,{children:l.password})]})]}),Object(j.jsx)(f.a,{disabled:a||!c||!s,type:"submit",isLoading:a,mt:10,className:"auth__btn",children:"Sign up"})]})}})}),Object(j.jsx)(h.a,{mt:5,children:Object(j.jsxs)("p",{style:{color:"#fff",fontSize:".75em"},children:["Dont have an account yet? ",Object(j.jsx)(w.a,{to:"/login",children:"Login"})]})})]})})})),Je=function(){return Object(j.jsx)("footer",{children:Object(j.jsx)(ge.a,{maxW:"container.lg",centerContent:!0,children:Object(j.jsxs)("p",{children:["Copyright \xa9 hiemdall ",(new Date).getFullYear()]})})})},Ye=(r(316),r(166)),Ge=function(){return Object(j.jsx)(h.a,{h:"calc(100vh - 100px)",children:Object(j.jsxs)(d.a,{children:[Object(j.jsxs)(ke.a,{children:[Object(j.jsx)(Ye.a,{}),Object(j.jsx)("p",{children:"Sorry we couldnt find what you're looking for"})]}),Object(j.jsx)(h.a,{children:Object(j.jsx)(w.a,{to:"/",style:{color:"#237EA3"},children:"Go home \u2192"})})]})})},Ke=Object(Oe.a)(xe);var Qe=Object(s.i)(Object(b.a)((function(){var e=Object(n.useContext)(de),t=e.loadApp,r=e.getCurrentUser,o=e.token,a=e.appLoaded;Object(n.useEffect)((function(){o&&r().then((function(){return t()})),t()}),[o,r,t]);var c=Object(s.g)().pathname;return a?Object(j.jsxs)(pe.a,{theme:Ke,children:[Object(j.jsx)(I.a,{position:"bottom-right"}),Object(j.jsxs)("div",{className:"app",children:[Object(j.jsxs)("div",{className:"content",children:["/signup"!==c&&"/login"!==c&&Object(j.jsx)(Ne,{}),Object(j.jsxs)(s.d,{children:[Object(j.jsx)(s.b,{exact:!0,path:"/login",component:he}),Object(j.jsx)(u,{exact:!0,path:"/",component:Ve}),Object(j.jsx)(u,{exact:!0,path:"/book/:id",component:Fe}),Object(j.jsx)(u,{exact:!0,path:"/borrowed",component:Te}),Object(j.jsx)(s.b,{exact:!0,path:"/signup",component:He}),Object(j.jsx)(s.b,{exact:!0,component:Ge})]})]}),"/signup"!==c&&"/login"!==c&&Object(j.jsx)(Je,{})]})]}):Object(j.jsx)(Se,{})}))),Xe=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,357)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;r(e),n(e),o(e),a(e),c(e)}))},Ze=(r(317),r(30)),$e=Object(Ze.a)();c.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(s.c,{history:$e,children:Object(j.jsx)(Ae.a,{ReactRouterRoute:s.b,children:Object(j.jsx)(Qe,{})})})}),document.getElementById("root")),Xe()}},[[318,1,2]]]);
//# sourceMappingURL=main.00b4d821.chunk.js.map